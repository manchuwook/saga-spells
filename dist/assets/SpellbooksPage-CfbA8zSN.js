import{n as e,j as r,M as l,P as o,o as a,V as s,y as n,W as i,G as t,l as c,T as d,K as p,x as h,X as m,Q as b,t as j,v as u,Y as x}from"./mantine-core-BHR5fWID.js";import{h as k,r as g}from"./react-vendor-Dbzhzy_A.js";import{u as y}from"./useSpellbooks-BQRnh1fI.js";import{u as f,n as C,m as w}from"./mantine-extras-ebvNXs23.js";import{E as S}from"./EditSpellbookModal-CUnQGNl7.js";import{e as v,f as z,g as D,h as P}from"./icons-B2NvWKa5.js";import"./index-DSYVc5nJ.js";import"./data-vendor-DKnsUd_z.js";import"./pdf-vendor-Dox1XW1S.js";function M({opened:p,onClose:h}){const{addSpellbook:m}=y(),{colorScheme:b}=e(),j="dark"===b,u=f({initialValues:{name:"",character:"",description:""},validate:{name:e=>e?null:"Spellbook name is required",character:e=>e?null:"Character name is required"}}),x=()=>{u.reset(),h()};return r.jsx(l,{opened:p,onClose:x,title:r.jsx(d,{order:2,c:j?"white":"dark.9",children:"Create New Spellbook"}),size:"md",overlayProps:{backgroundOpacity:.65,blur:4,color:j?"black":"#e6d9c2"},children:r.jsx(o,{p:"md",withBorder:!1,bg:j?"dark.6":"gray.0",children:r.jsx("form",{onSubmit:u.onSubmit((e=>{m({name:e.name,character:e.character,description:e.description,spells:[]}),C.show({title:"Spellbook Created",message:`${e.name} has been created for ${e.character}`,color:"green"}),u.reset(),h()})),children:r.jsxs(a,{gap:"md",children:[r.jsx(s,{label:r.jsx(n,{fw:600,size:"sm",c:j?"gray.2":"dark.9",children:"Spellbook Name"}),placeholder:"My Wizard's Spellbook",...u.getInputProps("name"),styles:{input:{backgroundColor:j?"var(--mantine-color-dark-5)":"white",borderColor:j?"var(--mantine-color-dark-4)":"var(--mantine-color-gray-4)"}}}),r.jsx(s,{label:r.jsx(n,{fw:600,size:"sm",c:j?"gray.2":"dark.9",children:"Character Name"}),placeholder:"Gandalf the Grey",...u.getInputProps("character"),styles:{input:{backgroundColor:j?"var(--mantine-color-dark-5)":"white",borderColor:j?"var(--mantine-color-dark-4)":"var(--mantine-color-gray-4)"}}}),r.jsx(i,{label:r.jsx(n,{fw:600,size:"sm",c:j?"gray.2":"dark.9",children:"Description (Optional)"}),placeholder:"A brief description of this spellbook...",...u.getInputProps("description"),autosize:!0,minRows:3,maxRows:5,styles:{input:{backgroundColor:j?"var(--mantine-color-dark-5)":"white",borderColor:j?"var(--mantine-color-dark-4)":"var(--mantine-color-gray-4)"}}}),r.jsxs(t,{justify:"flex-end",mt:"md",children:[r.jsx(c,{variant:"outline",onClick:x,color:j?"gray.4":"gray.6",children:"Cancel"}),r.jsx(c,{type:"submit",color:j?"blue.4":"blue.6",children:"Create Spellbook"})]})]})})})})}function N(){const{spellbooks:l,deleteSpellbook:o}=y(),s=k(),[i,f]=g.useState(null),{colorScheme:N}=e(),$="dark"===N,[A,{open:B,close:E}]=p(!1),[G,{open:I,close:O}]=p(!1),V=e=>{s(`/spellbooks/${e}`)};return r.jsxs(h,{size:"xl",py:"xl",children:[r.jsxs(t,{justify:"space-between",mb:"xl",children:[r.jsx(d,{order:1,c:$?"gray.1":"dark.8",children:"My Spellbooks"}),r.jsx(c,{leftSection:r.jsx(v,{size:16}),onClick:B,color:$?"blue.4":"blue.6",children:"New Spellbook"})]}),0===l.length?r.jsxs(m,{withBorder:!0,p:"xl",ta:"center",bg:$?"dark.6":"white",children:[r.jsx(n,{size:"lg",fw:500,mb:"md",c:$?"gray.1":"dark.8",children:"You don't have any spellbooks yet"}),r.jsx(n,{mb:"xl",c:$?"gray.3":"dark.6",children:"Create your first spellbook to start collecting spells for your character."}),r.jsx(c,{onClick:B,color:$?"blue.4":"blue.6",children:"Create Spellbook"})]}):r.jsx(b,{cols:{base:1,sm:2,lg:3},spacing:"md",children:l.map((e=>{return r.jsx(m,{withBorder:!0,shadow:"sm",padding:"md",radius:"md",bg:$?"dark.6":"white",style:{borderColor:$?"var(--mantine-color-dark-4)":"var(--mantine-color-gray-3)"},children:r.jsxs(a,{gap:"xs",children:[r.jsxs(t,{justify:"space-between",children:[r.jsx(d,{order:3,c:$?"gray.1":"dark.8",children:e.name}),r.jsxs(t,{gap:5,children:[r.jsx(j,{label:"View Spellbook",children:r.jsx(u,{variant:"subtle",color:$?"blue.4":"blue.6",onClick:()=>V(e.id),children:r.jsx(z,{size:16})})}),r.jsx(j,{label:"Edit Spellbook",children:r.jsx(u,{variant:"subtle",color:$?"yellow.4":"yellow.6",onClick:()=>(e=>{f(e),I()})(e),children:r.jsx(D,{size:16})})}),r.jsx(j,{label:"Delete Spellbook",children:r.jsx(u,{variant:"subtle",color:$?"red.4":"red.6",onClick:()=>(e=>{w.openConfirmModal({title:"Delete Spellbook",children:r.jsxs(n,{size:"sm",children:['Are you sure you want to delete "',e.name,'" for ',e.character,"? This action cannot be undone."]}),labels:{confirm:"Delete",cancel:"Cancel"},confirmProps:{color:"red"},onConfirm:()=>{o(e.id),C.show({title:"Spellbook Deleted",message:`${e.name} has been deleted`,color:"red"})}})})(e),children:r.jsx(P,{size:16})})})]})]}),r.jsxs(n,{fw:500,c:$?"gray.4":"gray.7",children:["Character: ",e.character]}),r.jsxs(t,{children:[r.jsxs(x,{color:$?"green.4":"green.6",children:[e.spells.length," ",1===e.spells.length?"spell":"spells"]}),r.jsxs(n,{size:"xs",c:$?"gray.5":"gray.6",children:["Updated: ",(l=e.updatedAt,l.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}))]})]}),e.description&&r.jsx(n,{lineClamp:2,size:"sm",c:$?"gray.3":"dark.7",children:e.description}),r.jsx(c,{variant:"light",fullWidth:!0,onClick:()=>V(e.id),mt:"md",color:$?"blue.4":"blue.6",children:"Open Spellbook"})]})},e.id);var l}))}),r.jsx(M,{opened:A,onClose:E}),r.jsx(S,{spellbook:i,opened:G,onClose:O})]})}export{N as default};
